<section id="main-content">
   <section class="wrapper">
      <!DOCTYPE html>
      <html lang="en">
         <head>
            <meta charset="utf-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta name="description" content="">
            <meta name="author" content="Mosaddek">
            <meta name="keyword" content="FlatLab, Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina">
         </head>
         <body>
            <div class="row">
               <div class="col-lg-12">
                  <section class="panel">
                     <header class="panel-heading">
                        Account History
                     </header>
                     <div class="panel-body">
                        <div class="adv-table">
                           <table cellpadding="0" cellspacing="0" border="0" 
                              class="table table-striped table-condensed">
                              <thead>
                                 <tr>
                                    <th></th>
                                    <th style="text-align: center;">Grant</th>
                                    <th style="text-align: center;">Date</th>
                                    <th style="text-align: center;">Market</th>
                                    <th style="text-align: center;">Dividend</th>
                                    <th style="text-align: center;">Balance</th>
                                    <th style="text-align: center;">Action</th>
                                 </tr>
                              </thead>
                              <tbody id="trade_history">
                                 <% @history.each do |history|%>
                                 <tr>
                                    <td style="text-align: center;"><input type="checkbox" name="account" id="test" class="amit" value="<%= history.id%>"></td>
                                    <td style="text-align: center;"><%= history.user.first_name + ' ' + history.user.last_name %></td>
                                    <td style="text-align: center;"><%= history.created_at.strftime("%d-%m-%Y") %></td>
                                    <td style="text-align: center;">AAPL</td>
                                    <td style="text-align: center;">$<%= history.share %></td>
                                    <td style="text-align: center;">$<%= history.investment_principal %></td>
                                    <td style="text-align: center;">
                                       <a class='btn btn-shadow btn-primary deposit1'  href="#smart-modal-deposit<%= history.id %>" data-toggle="modal">Deposit</a> 
                                       <a  class='btn btn-shadow btn-primary'  href="#smart-modal-withdraw<%= history.id %>" data-toggle="modal">Withdrawl </a>
                                       <a  class='btn btn-shadow btn-primary'  href="#smart-modal-pool<%= history.id %>" data-toggle="modal"
                                          >Pool </a>
                                    </td>
                                 </tr>
                                 <div role="dialog" class="modal" id="smart-modal-deposit<%= history.id %>" >
   <div class="modal-dialog">
      <div class="modal-content">
         <div class="modal-header">
            <button aria-hidden="true" data-dismiss="modal" class="close" type="button">×</button>
            <h4 class="modal-title">Deposit Form</h4>
         </div>
         <div class="modal-body">
            <form id="deposit_form" role="form" action="/annotations/deposit" method="post">
               <div class="row">
                  <div class="col-sm-12">
                     <div class="form-group prepend-icon">
                        <label for="Buy Share">Deposit Amount</label>
                        <input id="deposit_amount" class="form-control" type="number" placeholder="Deposit Amount" name="balance" min="1" max="1000000" required="true">
                        <span class="field-icon "><i class="icon-credit-card"></i></span> 
                     </div>
                     <div class="form-group prepend-icon">
                        <label for="Buy Share">Source</label>
                          <select class="form-control" id="deposit_source" name="source" required="true">
                        <option value="">Select Source</option>
                        </select>
                     </div>
                     <input type="hidden" name="id" value="<%= history.id %>">
                     <div class="form-group">
                        <button class="btn btn-primary btn-shadow btn-block "><i class="icon-chevron-sign-up"></i>  Deposit </button>
                     </div>
                  </div>
               </div>
            </form>
         </div>
      </div>
   </div>
</div>
<div role="dialog" class="modal" id="smart-modal-withdraw<%= history.id %>" >
   <div class="modal-dialog">
      <div class="modal-content">
         <div class="modal-header">
            <button aria-hidden="true" data-dismiss="modal" class="close" type="button">×</button>
            <h4 class="modal-title">Withdrawl  Form</h4>
         </div>
         <div class="modal-body">
            <form id="withdraw_form" role="form" action="/annotations/withdraw" method="post">
               <div class="row">
                  <div class="col-sm-12">
                     <div class="form-group prepend-icon">
                        <label for="Buy Share">Withdrawl Amount</label>
                        <input id="withdraw_amount" class="form-control" type="number" placeholder="Withdraw Amount" name="balance" min="1" max="1000000" required="true">
                        <span class="field-icon"><i class="icon-credit-card"></i></span> 
                     </div>
                     <div class="form-group prepend-icon">
                        <label for="Buy Share">Source </label>
                        <select class="form-control" id="withdraw_source" name="source" required="true">
                        <option value="">Select Source</option>
                        </select>
                     </div>
                     <input type="hidden" name="id" value="<%= history.id %>">
                     <div class="form-group">
                        <button class="btn btn-primary btn-shadow btn-block "><i class="icon-chevron-sign-up"></i>  Withdrawl </button>
                     </div>
                  </div>
               </div>
            </form>
         </div>
      </div>
   </div>
</div>
<div role="dialog" class="modal" id="smart-modal-pool<%= history.id %>" >
   <div class="modal-dialog">
      <div class="modal-content">
         <div class="modal-header">
            <button aria-hidden="true" data-dismiss="modal" class="close" type="button">×</button>
            <h4 class="modal-title">Pool Form</h4>
         </div>
         <div class="modal-body">
            <form id="pool_form" role="form" action="/annotations/pool" method="post">
               <div class="row">
                  <div class="col-sm-12">
                     <div class="form-group prepend-icon">
                        <label for="Buy Share">Pool Amount</label>
                        <input id="pool_amount" class="form-control" type="number" placeholder="Pool Amount" name="balance" min="1" max="1000000" required="true">
                        <span class="field-icon "><i class="icon-credit-card"></i></span> 
                     </div>
                     <div class="form-group prepend-icon">
                        <label for="Buy Share">Investment Principal</label>
                        <select class="form-control" id="pool_source" name="source" required="true">
                        <option value="">Select Source</option>
                        </select>
                        </div>
                        <input type="hidden" name="value" id="pool_value" value="">
                     <div class="form-group">
                        <button class="btn btn-primary btn-shadow btn-block "><i class="icon-chevron-sign-up"></i>  Pool </button>
                     </div>
                  </div>
               </div>
            </form>
         </div>
      </div>
   </div>
</div>
                                 <% end if @history.present? %>
                              </tbody>
                           </table>
                           <ul class="pagination pagination-gap" style="display: inline-block; overflow: hidden; text-align: center; margin-bottom: 20px;">
                              <li style="float: left;" data-bind="css: { disabled: items.isFirstPage() }" class="previous disabled">
                                 <a href="#" aria-label="First" data-bind="click: items.toFirstPage">
                                 First
                                 </a>
                              </li>
                              <li style="float: left;" data-bind="css: { disabled: !items.hasPreviousPage() }" class="previous disabled">
                                 <a href="#" aria-label="Previous" data-bind="click: items.toPreviousPage">
                                 Previous
                                 </a>
                              </li>
                              <!-- ko foreach: items.pages -->
                              <li style="float: left;" data-bind="css: { active: $data == $parent.items.pageNumber() }">
                                 <a href="#" data-bind="text: $data, click:  $parent.items.pageNumber.bind($data)"></a>
                              </li>
                              <!-- /ko -->
                              <li style="float: left;" data-bind="css: { disabled: !items.hasNextPage() }" class="next disabled">
                                 <a href="#" aria-label="Next" data-bind="click: items.toNextPage">
                                 Next
                                 </a>
                              </li>
                              <li style="float: left;" data-bind="css: { disabled: items.isLastPage() }" class="next disabled">
                                 <a href="#" aria-label="Last" data-bind="click: items.toLastPage">
                                 Last
                                 </a>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </section>
               </div>
            </div>
   </section>
   <!--main content end-->
   </body>
   </html>
</section>
</section>
<!-- js placed at the end of the document so the pages load faster -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.8.0/xlsx.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.8.0/jszip.js"></script>
<script src="/assets/investor/viewRequests.js"  type="text/javascript" /></script>

<script type="text/javascript">
   $('[id^=test]').click(function(){
    if($(this).is(":checked")) {
        $(this).addClass('red');
    } else {
        $(this).removeClass('red');
    }
    var values = [];
   $('.red').each(function(){
    values.push(this.value ); 
   });
   //use values after the loop
   $('#pool_value').val(values);
    });


// $(document).click(function(){
//   $("#deposit_form").validate({
//         rules:{
//             "balance": {required: true,number: true},
//             "source": {required: true}
//         },
//         messages:{
//             "balance": {required: "Please enter the deposit amount"},
//             "source": {required: "Please select one of the source"}
//         }

//     });

//     $("#withdraw_form").validate({
//         rules:{
//             "balance": {required: true,number: true},
//             "source": {required: true}
//         },
//         messages:{
//             "balance": {required: "Please enter the withdraw amount"},
//             "source": {required:  "Please select one of the source"}
//         }

//     });

//     $("#pool_form").validate({
//         rules:{
//             "source": {required: true},
//             "balance": {required: true,number: true}
//         },
//         messages:{
//             "balance": {required: "Please enter the pool amount"},
//             "source": {required:  "Please select one of the source"}
//         },

//     });
// });

</script>